version: '3.8'

services:
  backend:
    build: .
    container_name: tcoi-backend
    ports:
      - "3031:3031"
    env_file:
      - .env
    depends_on:
      - redis
    # The backend service will wait for Redis to be ready before starting
    # All environment variables are loaded from .env file

  redis:
    image: redis:7.2
    container_name: tcoi-redis
    ports:
      - "6379:6379"
    # This exposes Redis on the default port for local development
    # For production, you may want to set a password and restrict access

# How to use:
# 1. Make sure your .env file is correct (REDIS_HOST=redis, REDIS_PORT=6379)
# 2. Run: docker-compose up --build
# 3. Your backend will be available at http://localhost:3031
# 4. Redis will be available at localhost:6379 for other tools
#
# If you want to stop and remove containers: docker-compose down
